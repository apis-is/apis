// Generated by CoffeeScript 1.4.0
(function(){var e,t,n;window.APIs={Models:{},Views:{},Collections:{}};window.template=function(e){return $("#"+e+"Template").html()};APIs.Models.Person=Backbone.Model.extend({defaults:{number:"-"}});APIs.Views.Person=Backbone.View.extend({tagName:"tr",template:_.template(template("person")),render:function(){this.model.get("number")===""&&this.model.set({number:"-"});this.model.get("address")===" "&&this.model.set({address:"-"});this.$el.html(this.template(this.model.toJSON()));return this}});APIs.Collections.Persons=Backbone.Collection.extend({model:APIs.Models.Person,comparator:function(e){return e.get("name")}});APIs.Views.Persons=Backbone.View.extend({tagName:"tbody",render:function(){this.collection.forEach(function(e){return this.el.appendChild((new APIs.Views.Person({model:e})).render().el)},this);return this}});e=function(e){var t,n;$(query).prop("disabled",!1);$(".loader").toggleClass("hidden");if(e.results.length===0){$(".wrapper").append($("<p>").addClass("no-results").html("Ekkert fannst..."));return $("p.no-results").delay(5e3).slideUp()}t=new APIs.Collections.Persons(e.results);n=new APIs.Views.Persons({collection:t});$("#results table").append(n.render().el);$(".json pre").html(JSON.stringify(e,void 0,4));prettyPrint();$("td.number").each(function(e,t){if($(t).html().match(/(\d{3})(\d{4})/))return $(t).html($(t).html().replace(/(\d{3})(\d{4})/,"$1-$2"))});$("#results").toggleClass("hidden");return $(".loader").addClass("hidden")};t=function(t){return $.ajax("http://apis.is/phone",{type:"POST",data:{name:t},success:function(t,n,r){return e(t)}})};APIs.Views.Search=Backbone.View.extend({el:".search",events:{webkitspeechchange:"submitForm",submit:"submitForm"},submitForm:function(e){var n;e.preventDefault();$(".welcome").remove();$("#results").addClass("hidden");$(".loader").toggleClass("hidden");$("#results table tbody").length>0&&$("#results table tbody").remove();$("p.no-results").length>0&&$("p.no-results").remove();n=this.$("#query");$(n).prop("disabled",!0);return t(n.val())}});n=new APIs.Views.Search}).call(this);